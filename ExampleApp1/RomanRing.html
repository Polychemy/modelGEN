<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Polychemy - Roman Ring</title>

<script src="js/jquery-1.9.0.min.js" type="text/javascript"></script> 
<!--This script helps to detect of WebGl Is enabled.-->
<script src="js/Detector.js"></script>

</head>

<body>


<h1>Polychemy Roman Ring</h1>

<em>Polychemy's Roman rings are for the Royal at heart. <br />
Customized with 3D printing, and casted in a variety of precious metals, and polished to a mirror finish. Each ring custom made just for you.<br />
Personalise this Roman ring and have your name made into our ringâ€™s Design.<br />
Polychemy Roman Rings are made just for you and personalised to you taste.<br /></em>

<p>
<div id="3DDisplay" style="width:500px; height:300px;background-repeat:no-repeat;background-position:center;"  onmousedown="MouseDown3DDisplay(event)"></div>
<p>

<p>
<h2><div id="status">Loading..</div></h2>
</p>
Custom Text : <input name="CustomText" id="CustomText" type="text" value="Love" size="20" maxlength="8" style=" width:250px;" /><br />
Material : 
  <select name="Material" id="Material" style=" width:250px;" id="ChosenMaterial" >
      <option selected value="Gold_Plated_Brass" >Gold Plated</option>
      <option value="Sterling_Silver" >Sterling Silver</option>
  </select><br />


 Ring Size : 
 <select name="RingSize" id="RingSize"  style="width:250px;">
           <option value="3"> 3</option>
          <option value="3.5"> 3.5</option>
          <option value="4"> 4</option>
          <option value="4.5"> 4.5</option>
          <option value="5"> 5</option>
          <option value="5.5"> 5.5</option>
          <option selected value="6"> 6</option>
          <option value="6.5"> 6.5</option>
           <option value="7"> 7</option>
           <option value="7.5"> 7.5</option>
           <option value="8"> 8</option>
           <option value="8.5"> 8.5</option>
           <option value="9"> 9</option>
           <option value="9.5"> 9.5</option>
           <option value="10"> 10</option>
           <option value="10.5"> 10.5</option>
           <option value="11"> 11</option>
           <option value="11.5"> 11.5</option>
           <option value="12"> 12</option>
           <option value="12.5"> 12.5</option>
           <option value="13"> 13</option>
          </select>

<br /><p>
<input name="Refresh" type="button" value="Refresh"  style="width:350px;" onmouseup="createJewelry();"/>


<!--OPENGl Shaders. This is used for the WebGL display-->
 <script type="x-shader/x-vertex" id="vertexShader">
        attribute vec4 tangent;

        uniform float time;
        uniform vec2 repeat;
        uniform float useNormal;
        uniform float useRim;

        varying vec2 vUv;
        varying vec3 vTangent;
        varying vec3 vBinormal;
        varying vec3 vNormal;
        varying vec3 vEye;
        varying vec3 vU;
        varying vec2 vN;

        void main() {

            vU = normalize(vec3(modelViewMatrix * vec4(position, 1.0)));

            if (useNormal == 0.) {
                vec3 n = normalize(normalMatrix * normal);
                vec3 r = reflect(vU, n);
                float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));
                vN = vec2(r.x / m + 0.5, r.y / m + 0.5);
            } else {
                vN = vec2(0.);
            }

            vUv = repeat * uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

            vNormal = normalize(normalMatrix * normal);
            if (useNormal == 1.) {
                vTangent = normalize(normalMatrix * tangent.xyz);
                vBinormal = normalize(cross(vNormal, vTangent) * tangent.w);
            } else {
                vTangent = vec3(0.);
                vBinormal = vec3(0.);
            }

            if (useRim > 0.) {
                vEye = (modelViewMatrix * vec4(position, 1.0)).xyz;
            } else {
                vEye = vec3(0.);
            }

        }
    </script>

    <script type="x-shader/x-vertex" id="fragmentShader">
        uniform float time;
        uniform float bump;
        uniform sampler2D tNormal;
        uniform sampler2D tMatCap;
        uniform float noise;
        uniform float useNormal;
        uniform float useRim;
        uniform float rimPower;
        uniform float useScreen;
        uniform float normalScale;
        uniform float normalRepeat;

        varying vec2 vUv;
        varying vec3 vTangent;
        varying vec3 vBinormal;
        varying vec3 vNormal;
        varying vec3 vEye;
        varying vec3 vU;
        varying vec2 vN;

        float random(vec3 scale, float seed) {
            return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
        }

        void main() {

            vec3 finalNormal = vNormal;
            vec2 calculatedNormal = vN;

            if (useNormal == 1.) {
                vec3 normalTex = texture2D(tNormal, vUv * normalRepeat).xyz * 2.0 - 1.0;
                normalTex.xy *= normalScale;
                normalTex.y *= -1.;
                normalTex = normalize(normalTex);
                mat3 tsb = mat3(normalize(vTangent), normalize(vBinormal), normalize(vNormal));
                finalNormal = tsb * normalTex;

                vec3 r = reflect(vU, normalize(finalNormal));
                float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));
                calculatedNormal = vec2(r.x / m + 0.5, r.y / m + 0.5);
            }

            vec3 base = texture2D(tMatCap, calculatedNormal).rgb;

            // rim lighting

            if (useRim > 0.) {
                float f = rimPower * abs(dot(vNormal, normalize(vEye)));
                f = useRim * (1. - smoothstep(0.0, 1., f));
                base += vec3(f);
            }

            // screen blending

            if (useScreen == 1.) {
                base = vec3(1.) - (vec3(1.) - base) * (vec3(1.) - base);
            }

            // noise 

            base += noise * (.5 - random(vec3(1.), length(gl_FragCoord)));

            gl_FragColor = vec4(base, 1.);

        }
    </script>


	<script src="js/three.js"></script>
	<script src="js/MTLLoader.js"></script>
    <script src="js/OBJMTLLoader.js"></script>
    <script src="3DDisplay.js"></script>

</body>
</html>
